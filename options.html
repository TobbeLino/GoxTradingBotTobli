<style>
body {
	font-family: Verdana, Arial, Helvetica, sans-serif;
	font-size:12px;
}
table.top {
	border: 2px solid black;
	padding: 10px;
	width:550px;
	background-color:#F0F0C0;
}
.outer {
	padding:20px;
	vertical-align:top;	
}
td {
	font-size:12px;
}

sup {
	font-size:70%;
	color:red;
	font-style:italic;
	font-weight:bold;
}
.mono {
	font-size:12px;
	font-family:monospace;
}
.maxwide {
	width:100%;
}
.r {
	text-align:right;
	padding-right:2px;
}
.note {
	font-size:11px;
	font-style:italic;
}
.info {
	font-size:12px;
	font-style:italic;
}
.stat {
	text-align:center;
}
.EMASettingsCell {
	padding:4px 6px;
	background:#FFA;
}
.experimentalRulesSettingsCell {
	display:block;
	padding:4px 6px;
	background:#DDC;
}
.top{
	vertical-align:top;
}
.smallFont {
	font-size:10px;
}
</style>
<table border="0" style="width:100%;max-width:1120px">
	<tr>
		<td class="outer">
			
			<table cellpadding="3" cellspacing="0" class="top">
				<form>
					<tr>
					 <td nowrap="nowrap" style="vertical-align:top;padding-top:5px;">MtGox API Key<sup> 1</sup></td>
					 <td>
						<input type="text" size="36" id="apikey" class="mono maxwide">
					 </td>
					</tr>
										
					<tr>
					 <td nowrap="nowrap" style="vertical-align:top;padding-top:5px;width:100px"><nobr>MtGox API Secret<sup> 1</sup>&nbsp;</nobr></td>
					 <td>
						<textarea id="apisec" cols="36" rows="3" class="mono maxwide"></textarea>
					 </td>
					</tr>

					<tr>
						<td nowrap="nowrap" style="vertical-align:top;padding-top:5px;">Trading enabled</td>
						<td>
							<input type="checkbox" value="true" id="tradingEnabled"> (uncheck to disable actual trading)
						</td>
					</tr>
					<tr>
						<td nowrap="nowrap" style="vertical-align:top;padding-top:5px;">Disabled on start</td>
						<td>
							<input type="checkbox" value="true" id="tradingDisabledOnStart"> (always start disabled to avoid instant/accidental trading)
						</td>
					</tr>
					
					<tr>
						<td nowrap="nowrap" style="vertical-align:top;padding-top:5px;">Sample interval</td>
						<td>
							<select id="tradingIntervalMinutes" class="mono">
								<option value="1">1 minute</option>
								<option value="5">5 minutes</option>
								<option value="10">10 minutes</option>
								<option value="15">15 minutes</option>
								<option value="30">30 minutes</option>
								<option value="45">45 minutes</option>
								<option value="60">1 hour</option>
								<option value="120">2 hours</option>
								<option value="180">3 hours</option>
								<option value="240">4 hours</option>
								<option value="300">5 hours</option>
							</select>
						</td>
					</tr>

					
					<tr>
						<td nowrap="nowrap" style="vertical-align:top;padding-top:5px;">Show last</td>
						<td>
							<select id="sla" class="mono">
								<option value="1">1 hour</option>
								<option value="2">2 hours</option>
								<option value="3">3 hours</option>
								<option value="6">6 hours</option>
								<option value="12">12 hours</option>
								<option value="24">1 day</option>
								<option value="48">2 days</option>
								<option value="72">3 days</option>
								<option value="96">4 days</option>
								<option value="120">5 days</option>
								<option value="240">10 days</option>
								<option value="0">Max</option>
							</select> (max <span id="maxVisibleSamples"></span> samples)
						</td>
					</tr>


					<tr>
						<td colspan="2" style="padding-top:1px;">&nbsp;</td>
					</tr>
					<tr>
						<td class="EMASettingsCell" colspan="2">
							EMA settings:
						</td>
					</tr>
					<tr>
						<td class="EMASettingsCell" nowrap="nowrap">Trend indicator</td>
						<td class="EMASettingsCell">EMA(<input type="text" size="2" maxlength="2" id="emas" class="mono r">) / EMA(<input type="text" size="2" maxlength="2" id="emal" class="mono r">)</td>
					</tr>
					<tr>
						<td class="EMASettingsCell" colspan="2" >
							<table width="400" cellpadding=0 cellspacing=0>
								<tr>
									<td width="50%">Buy threshold: <input type="text" size="4" maxlength="4" id="buy_tras" class="mono r">%<sup> 2</sup></td>
									<td>Sell threshold: -<input type="text" size="4" maxlength="4" id="sell_tras" class="mono r">%<sup> 2</sup></td>
								</tr>
							</table>
						</td>
					</tr>
					<tr>
						<td class="EMASettingsCell" colspan="2">
							<table width="400" cellpadding=0 cellspacing=0>
								<tr>
									<td width="50%">Buy after 
										<select id="tickCountBuy" class="mono">
											<option value="1">1 sample</option>
											<option value="2">2 samples</option>
											<option value="3">3 samples</option>
											<option value="4">4 samples</option>
											<option value="5">5 samples</option>
										</select>
									</td>
									<td width="50%">Sell after 
										<select id="tickCountSell" class="mono">
											<option value="1">1 sample</option>
											<option value="2">2 samples</option>
											<option value="3">3 samples</option>
											<option value="4">4 samples</option>
											<option value="5">5 samples</option>
										</select>
									</td>
								</tr>
							</table>
						</td>
					</tr>
					
					<tr>
						<td class="experimentalRulesSettingsCell" colspan="2" style="background:inherit;padding-top:1px;">&nbsp;</td>
					</tr>					
					<tr>
						<td class="experimentalRulesSettingsCell" colspan="2">
							Experimantal settings: <span style="display:inline-block;background:#FF0000;color:#FFF;padding:2px 5px; margin:0 5px">Use at your own risk!!</span>
						</td>
					</tr>
					<tr>
						<td class="experimentalRulesSettingsCell" colspan="2">
							<table width="520" cellpadding=0 cellspacing=0>
								<tr>
									<td class="experimentalRulesSettingsCell top" style="width:150px;padding:0">
										Trade <b>only</b> on trend switches
									</td>
									<td class="experimentalRulesSettingsCell top" >
										 <input type="checkbox" value="true" id="tradeOnlyAfterSwitch" style="margin-top:-3px">
									</td>
									<td class="experimentalRulesSettingsCell smallFont top" style="padding-top:0;padding-bottom:10px;">
										Only trade after a trend switch. I.e. when turning on the bot, it will NOT start trading until the current trend turns (unless the very latest sample triggered a switch). This is actually more close to Goomboo's original strategy. If you find yourself in the wrong position between trend switches, you should wait until the next swing.
									</td>
								</tr>
								<tr>
									<td class="experimentalRulesSettingsCell top" style="padding:0">
										<nobr>Invert EMA-strategy</nobr>
									</td>
									<td class="experimentalRulesSettingsCell top" >
										 <input type="checkbox" value="true" id="inverseEMA" style="margin-top:-3px">
									</td>
									<td class="experimentalRulesSettingsCell smallFont top" style="padding-top:0;padding-bottom:10px;">
										A.k.a. "The Crazy Ivan"! When the EMA-strategy is reversed, the bot will buy when it's supposed to sell, and sell when it should buy! :) There are absolutely NO theories supporting this strategy, however, when the market is ranging and you feel that the bot is always 180 degrees out of phase with the swings, it might work. Maybe...
									</td>
								</tr>								
							</table>
						</td>
					</tr>
<!--
					<tr>
						<td class="experimentalRulesSettingsCell" colspan="2">
							These rules are 
							<select id="simpleRulesMode" class="mono">
								<option value="0">disabled</option>
								<option value="1">enabled, but only used when the EMA-indicator is right</option>
								<option value="2">enabled, overriding the EMA-indicator!</option>
							</select>
						</td>
					</tr>
					<tr>
						<td class="experimentalRulesSettingsCell" colspan="2">
							<table width="520" cellpadding=0 cellspacing=0>
								<tr>
									<td width="50%">Buy if price is below: <input type="text" size="7" maxlength="8" id="simple_buy_below" class="mono r"> <span class="fiatUnit">USD</span></td>
									<td align="right" style="padding-right:10px">Sell if price is above: <input type="text" size="7" maxlength="8" id="simple_sell_above" class="mono r"> <span class="fiatUnit">USD</span></td>
								</tr>
							</table>
						</td>
					</tr>
-->					
					<tr>
						<td colspan="2" style="padding-top:1px;">&nbsp;</td>
					</tr>
					<tr>
						<td colspan="2">
							<table width="400" height="20" cellpadding=0 cellspacing=0>
								<tr>
									<td width="50%">Fiat currency: 
										<select id="currencySelector" class="mono">
											<option value="USD">USD</option>
											<option value="AUD">AUD</option>
											<option value="CAD">CAD</option>
											<option value="CHF">CHF</option>
											<option value="CNY">CNY</option>
											<option value="DKK">DKK</option>
											<option value="EUR">EUR</option>
											<option value="GBP">GBP</option>
											<option value="HKD">HKD</option>
											<option value="JPY">JPY</option>
											<option value="NZD">NZD</option>
											<option value="PLN">PLN</option>
											<option value="RUB">RUB</option>
											<option value="SEK">SEK</option>
											<option value="SGD">SGD</option>
											<option value="THB">THB</option>
											<option value="NOK">NOK</option>
											<option value="CZK">CZK</option>
										</select>										
									<td>Keep BTC: <input type="text" size="10" id="keepBTC" class="mono r"></td>
									<!--<td>Keep Fiat: <input type="text" size="6" id="keepFiat" class="mono"></td>-->
								</tr>
							</table>
						</td>
					</tr>
					
					<tr>
						<td colspan="2" style="padding-top:1px;">&nbsp;</td>
					</tr>					
					<tr>
					 <td colspan="2" align="center">
					  <input type="button" style="width:200px;" id="butres" value="Reset to defaults">
					  <input type="submit" style="width:200px;" id="butsav" value="Apply and save changes">
					 </td>
					</tr>
				</form>
			</table>

		</td>
		<td class="outer">
			<div class="info">
				Read <a href="https://bitcointalk.org/index.php?topic=60501" target="_blank">Goomboo's Journal</a> to learn about the strategy used by this trading bot.<br>
				The bot uses the first traded price of each sample interval for the EMA input.
			</div>
			<hr>
			<div class="note">
				<sup>1</sup>
				Take <b>API Key</b> and <b>Secret</b> from your MtGox account. Use <b>Advanced API Key Creation</b> at <a href="https://mtgox.com/security" target="_blank">Security Center</a> page to create these values. Make sure to grant only <b>get_info</b> and <b>trade</b> access rights for this API key. The bot does not need you to be logged at the MtGox account - just setup the Key&Secret, leave the browser running and it will trade...<br><br>
				<sup>2</sup>
				The bot will buy bitcoins for the <u>whole amount of fiat money</u>, or sell <u>all bitcoins, minus the value of "Keep BTC"</u> at the given MtGox account when the difference between the two EMA values (expressed in %) stays above/below the <b>Buy/sell thresholds</b> for as many samples as selected in "Buy/Sell after X samples".</div>
			<hr>
			<div class="note stat">
				If you like this extension send <b>0.01</b>&nbsp;BTC to the original author:<br><b>13g6zY7GJJvKEiYzTnGP8H9dEDEhYW2jFq</b>
			</div>
<br>
			<div class="note stat" style="background-color:#F0F0C0;padding:8px 0px; margin-top:10px; line-height:15px">
				Modified and enhanced by TobbeLino<br><br>
				Download the latest version at <a href="https://github.com/TobbeLino/GoxTradingBotTobli">https://github.com/TobbeLino/GoxTradingBotTobli</a><br><br>
				If you like my modifications, please make a donation! :) <b>1LUqdAXvH9gbYemZKeiMrVJ5njhm6ZvKmF</b>
			</div>
		</td> 
	</tr>
</table>

<script src="options.js"></script>
